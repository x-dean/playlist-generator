services:
  playlist-generator:
    build: .
    user: "${CURRENT_UID:-1000}:${CURRENT_GID:-1000}"
    entrypoint: ["bash"]
    volumes:
      - /root/music/library:/music:ro
      - /root/music/library/playlists/auto:/app/playlists
      - /root/music/library/playlists/auto/cache:/app/cache
    environment:
      - CACHE_DIR=/app/cache
      - UID=${CURRENT_UID:-1000}
      - GID=${CURRENT_GID:-1000}
      - PLAYLIST_METHOD=${PLAYLIST_METHOD:-all}
      - MIN_TRACKS_PER_GENRE=${MIN_TRACKS_PER_GENRE:-10}
    working_dir: /app
    # Remove command override to allow interactive use