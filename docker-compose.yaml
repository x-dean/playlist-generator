version: '3.8'

services:
  playlist-generator:
    build: .
    volumes:
      - ${HOST_MUSIC_DIR:-./music}:${MUSIC_DIR:-/music}:ro
      - ${OUTPUT_DIR:-./playlists}:/app/playlists
      - ${CACHE_DIR:-./cache}:/app/cache
    environment:
      - MUSIC_DIR=${MUSIC_DIR:-/music}
      - OUTPUT_DIR=/app/playlists
      - CACHE_DIR=/app/cache
      - WORKERS=${WORKERS:-4}
    working_dir: /app