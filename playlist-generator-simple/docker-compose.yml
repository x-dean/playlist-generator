# Docker Compose configuration for Playlist Generator Simple
# All configuration is handled via playlista.conf file

services:
  playlista-simple:
    container_name: playlista-simple
    build: .
    entrypoint: ["playlista"]
    volumes:
      # Music library - mount your music directory here
      - ./music:/music:ro
      
      # Playlists output directory
      - ./playlists:/app/playlists
      
      # Cache directory for analysis results
      - ./cache:/app/cache
      
      # Logs directory
      - ./logs:/app/logs
      
      # Failed files directory
      - ./failed_files:/app/failed_files
      
      # Models directory (optional - for custom models)
      - ./models:/app/models:ro
      
      # Configuration file
      - ./playlista.conf:/app/playlista.conf:ro
    # All configuration comes from playlista.conf file
    # No environment variables needed - everything is hardcoded in the application
    working_dir: /app
    tty: true
    stdin_open: true
    
    # Resource limits
    deploy:
      resources:
        limits:
          memory: 8G
          cpus: '4.0'
        reservations:
          memory: 2G
          cpus: '1.0'
    
    # Health check
    healthcheck:
      test: ["CMD", "python", "-c", "import sys; sys.exit(0)"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s 