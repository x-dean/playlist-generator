# =============================================================================
# PLAYLIST GENERATOR - USER CONFIGURATION
# =============================================================================
# Only user-configurable settings here. Docker paths are handled automatically.

# =============================================================================
# ANALYSIS BEHAVIOR  
# =============================================================================

# Analysis timeout in seconds (10 minutes default)
ANALYSIS_TIMEOUT=600

# Large file threshold - files above this size get Essentia-only (no MusiCNN)  
LARGE_FILE_THRESHOLD_MB=200

# =============================================================================
# SMART WORKER ALLOCATION
# =============================================================================

# Worker allocation: 'auto' = dynamic based on workload, or specific number (1-8)
ANALYSIS_WORKERS=auto

# Base memory per worker (gets multiplied 2x-4x for large files with Essentia)
BASE_MEMORY_PER_WORKER_GB=1.2

# RAM override for containers/LXC (leave empty for auto-detection)
USER_OVERRIDE_TOTAL_RAM_GB=8

# Workload detection: 'auto' = adjust based on file sizes, 'fixed' = use base only
WORKLOAD_DETECTION_MODE=auto

# =============================================================================
# AUDIO PROCESSING
# =============================================================================

# Sample rate for analysis (22050 Hz = good balance of speed/quality)  
OPTIMIZED_SAMPLE_RATE=22050

# Segment analysis for large files
SEGMENT_LENGTH=30                       # Seconds per segment
MAX_SEGMENTS=4                          # Maximum segments to analyze

# Analysis quality: 'low', 'balanced', 'high_accuracy'
PIPELINE_RESOURCE_MODE=balanced

# =============================================================================
# LOGGING
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Log file rotation
LOG_FILE_SIZE_MB=50                     # Max size before rotation
LOG_MAX_FILES=5                         # Number of rotated logs to keep

# =============================================================================
# DATABASE CONNECTIONS (OPTIONAL - Usually handled by Docker)
# =============================================================================

# Connection pooling (only if not using Docker environment variables)
POSTGRES_MIN_CONNECTIONS=2
POSTGRES_MAX_CONNECTIONS=10

# =============================================================================
# EXTERNAL APIs (OPTIONAL)
# =============================================================================

# MusicBrainz metadata enrichment
MUSICBRAINZ_ENABLED=false

# Last.fm API integration  
LASTFM_ENABLED=false
LASTFM_API_KEY=                         # Add your API key if using Last.fm

# =============================================================================
# NOTES FOR DOCKER USERS
# =============================================================================
# These paths are automatically configured in Docker and don't need to be changed:
# - MUSIC_PATH=/music (mapped in docker-compose)
# - LOG_FILE=/app/logs/playlista.log (Docker environment)
# - CACHE_DIR=/app/cache (Docker environment)  
# - MUSICNN_MODEL_PATH=/app/models/... (Docker mount)
# - PostgreSQL connection (Docker environment variables override)